<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B·∫£ng Tin Th·ªùi Ti·∫øt</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
  <body>
    <!-- Weather Effects Background -->
    <div id="weatherEffects" class="weather-effects">
        <canvas id="weatherCanvas"></canvas>
    </div>
    
    <!-- Floating Alert Badge (Persistent Warning Icon) -->
    <div id="floatingAlertBadge" class="floating-alert-badge hidden">
        <div class="badge-pulse"></div>
        <i class="fas fa-triangle-exclamation"></i>
        <div class="badge-count" id="badgeCount">1</div>
    </div>

    <!-- Flood Alert Banner (Compact) -->
    <div id="floodAlertBanner" class="flood-alert-banner hidden">
        <div class="alert-icon-container">
            <div class="alert-icon-pulse"></div>
            <i class="fas fa-triangle-exclamation alert-icon"></i>
        </div>
        <div class="alert-content">
            <div class="alert-title" id="alertTitle">C·∫£nh B√°o Thi√™n Tai</div>
            <div class="alert-message" id="alertMessage">ƒêang c√≥ nguy c∆° th·ªùi ti·∫øt nguy hi·ªÉm</div>
        </div>
        <div class="alert-actions">
            <button id="viewAlertDetails" class="view-details-btn">
                <i class="fas fa-info-circle"></i>
                Chi ti·∫øt
            </button>
            <button id="closeAlert" class="close-banner-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Flood Alert Modal (Details) -->
    <div id="floodAlertModal" class="flood-alert-modal hidden">
        <div class="flood-alert-overlay"></div>
        <div class="flood-alert-content">
            <div class="flood-alert-header">
                <i class="fas fa-triangle-exclamation"></i>
                <h2>Chi Ti·∫øt C·∫£nh B√°o</h2>
                <button id="closeFloodModal" class="close-alert-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flood-alert-body">
                <div id="floodAlertMessage"></div>
                <div class="flood-alert-tips">
                    <h3><i class="fas fa-lightbulb"></i> Khuy·∫øn Ngh·ªã An To√†n:</h3>
                    <ul id="safetyTips">
                        <li>Theo d√µi tin t·ª©c th·ªùi ti·∫øt th∆∞·ªùng xuy√™n</li>
                        <li>Chu·∫©n b·ªã ƒë·ªì d√πng c·∫ßn thi·∫øt v√† di chuy·ªÉn ƒë·∫øn n∆°i an to√†n</li>
                        <li>Kh√¥ng ƒëi qua v√πng ng·∫≠p n∆∞·ªõc s√¢u</li>
                        <li>Li√™n h·ªá c∆° quan ch·ª©c nƒÉng khi c·∫ßn h·ªó tr·ª£: 113</li>
                    </ul>
                </div>
                <div class="flood-alert-source">
                    <p><i class="fas fa-info-circle"></i> Ngu·ªìn: WeatherAPI.com & H·ªá th·ªëng d·ª± b√°o th·ªùi ti·∫øt</p>
                </div>
            </div>
            <div class="flood-alert-footer">
                <button id="confirmFloodAlert" class="confirm-alert-btn">
                    ƒê√£ hi·ªÉu
                </button>
            </div>
        </div>
    </div>
    
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">
                    <i class="fas fa-cloud-sun"></i>
                    AliWeather
                </h1>
                <div class="header-controls">
                    <button id="refreshBtn" class="refresh-btn" title="L√†m m·ªõi d·ªØ li·ªáu">
                        <i class="fas fa-rotate"></i>
                        <span>L√†m m·ªõi</span>
                    </button>
                    <button id="themeToggle" class="theme-toggle" title="Chuy·ªÉn ch·∫ø ƒë·ªô">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="last-update">
                        C·∫≠p nh·∫≠t l√∫c: <span id="lastUpdate">--:--</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="locationSearch" placeholder="T√¨m ki·∫øm th√†nh ph·ªë..." autocomplete="off">
                    <button id="currentLocationBtn" class="location-btn" title="D√πng v·ªã tr√≠ hi·ªán t·∫°i">
                        <i class="fas fa-location-crosshairs"></i>
                    </button>
                </div>
                <div id="searchResults" class="search-results hidden"></div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Loading State -->
            <div id="loadingState" class="loading-state">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i d·ªØ li·ªáu th·ªùi ti·∫øt...</p>
            </div>

            <!-- Error State -->
            <div id="errorState" class="error-state hidden">
                <i class="fas fa-exclamation-triangle"></i>
                <p id="errorMessage">C√≥ l·ªói x·∫£y ra</p>
                <button id="retryBtn" class="retry-btn">Th·ª≠ l·∫°i</button>
            </div>

            <!-- Weather Content -->
            <div id="weatherContent" class="weather-content hidden">
                <!-- Weather Alerts -->
                <div id="alertsSection" class="alerts-section hidden">
                    <div class="alert-banner">
                        <i class="fas fa-triangle-exclamation"></i>
                        <div id="alertsContent"></div>
                    </div>
                </div>

                <!-- Current Weather -->
                <section class="current-weather">
                    <div class="location-info">
                        <h2 id="locationName">--</h2>
                        <p id="locationCountry">--</p>
                        <p id="currentDateTime">--</p>
                    </div>

                    <div class="current-main">
                        <div class="temperature-display">
                            <div class="temp-icon">
                                <img id="currentWeatherIcon" src="" alt="Weather icon">
                            </div>
                            <div class="temp-value">
                                <span id="currentTemp">--</span>
                                <span class="temp-unit">¬∞C</span>
                            </div>
                        </div>
                        <div class="weather-description">
                            <p id="weatherCondition">--</p>
                            <p class="feels-like">C·∫£m gi√°c nh∆∞ <span id="feelsLike">--</span>¬∞C</p>
                        </div>
                    </div>

                    <div class="current-details">
                        <div class="detail-item">
                            <i class="fas fa-droplet"></i>
                            <div>
                                <span class="detail-label">ƒê·ªô ·∫©m</span>
                                <span class="detail-value" id="humidity">--%</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-wind"></i>
                            <div>
                                <span class="detail-label">Gi√≥</span>
                                <span class="detail-value" id="windSpeed">-- km/h</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-gauge"></i>
                            <div>
                                <span class="detail-label">√Åp su·∫•t</span>
                                <span class="detail-value" id="pressure">-- mb</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-eye"></i>
                            <div>
                                <span class="detail-label">T·∫ßm nh√¨n</span>
                                <span class="detail-value" id="visibility">-- km</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-sun"></i>
                            <div>
                                <span class="detail-label">Ch·ªâ s·ªë UV</span>
                                <span class="detail-value" id="uvIndex">--</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-cloud"></i>
                            <div>
                                <span class="detail-label">M√¢y</span>
                                <span class="detail-value" id="clouds">--%</span>
                            </div>
                        </div>
                    </div>

                    <div class="sun-times">
                        <div class="sun-item">
                            <i class="fas fa-sunrise"></i>
                            <span>B√¨nh minh: <span id="sunrise">--:--</span></span>
                        </div>
                        <div class="sun-item">
                            <i class="fas fa-sunset"></i>
                            <span>Ho√†ng h√¥n: <span id="sunset">--:--</span></span>
                        </div>
                    </div>
                </section>

                <!-- Air Quality -->
                <section class="air-quality-section">
                    <h3><i class="fas fa-lungs"></i> Ch·∫•t L∆∞·ª£ng Kh√¥ng Kh√≠</h3>
                    <div id="airQualityContent">
                        <div class="aqi-main">
                            <div class="aqi-value" id="aqiValue">--</div>
                            <div class="aqi-label" id="aqiLabel">--</div>
                        </div>
                        <div class="pollutants-grid">
                            <div class="pollutant-item">
                                <span class="pollutant-name">PM2.5</span>
                                <span class="pollutant-value" id="pm25">--</span>
                            </div>
                            <div class="pollutant-item">
                                <span class="pollutant-name">PM10</span>
                                <span class="pollutant-value" id="pm10">--</span>
                            </div>
                            <div class="pollutant-item">
                                <span class="pollutant-name">CO</span>
                                <span class="pollutant-value" id="co">--</span>
                            </div>
                            <div class="pollutant-item">
                                <span class="pollutant-name">NO‚ÇÇ</span>
                                <span class="pollutant-value" id="no2">--</span>
                            </div>
                            <div class="pollutant-item">
                                <span class="pollutant-name">O‚ÇÉ</span>
                                <span class="pollutant-value" id="o3">--</span>
                            </div>
                            <div class="pollutant-item">
                                <span class="pollutant-name">SO‚ÇÇ</span>
                                <span class="pollutant-value" id="so2">--</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Hourly Forecast -->
                <section class="hourly-forecast">
                    <h3><i class="fas fa-clock"></i> D·ª± B√°o Theo Gi·ªù</h3>
                    <div class="hourly-chart-container">
                        <canvas id="hourlyChart"></canvas>
                    </div>
                    <div class="hourly-scroll" id="hourlyScroll">
                        <!-- Hourly items will be inserted here -->
                    </div>
                </section>

                <!-- 7-Day Forecast -->
                <section class="daily-forecast">
                    <h3><i class="fas fa-calendar-days"></i> D·ª± B√°o 7 Ng√†y</h3>
                    <div class="forecast-grid" id="forecastGrid">
                        <!-- Daily forecast cards will be inserted here -->
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>D·ªØ li·ªáu t·ª´ <a href="https://www.weatherapi.com/" target="_blank">WeatherAPI.com</a></p>
            <p class="footer-note">üå§Ô∏è Click n√∫t "L√†m m·ªõi" ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu th·ªùi ti·∫øt</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/weather-effects.js"></script>
    <script src="js/flood-alert.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>

